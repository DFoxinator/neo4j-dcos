{  
  "id":"neo4j",
  "apps":[  
    {  
      "id":"core",
      "cpus":{{service.core-cpus}},
      "mem":{{service.core-mem}},
      "instances":{{service.core-instances}},
      "disk": {{service.core-disk}},
      "container":{  
        "type":"DOCKER",
        "docker":{  
          "image":"unterstein/dcos-neo4j:1.0.0-3.1-RC1",
          "network":"USER",
          "volumes":[  
            {  
              "containerPath":"data",
              "mode":"RW",
              "persistent":{  
                "type":"root",
                "size":{{service.core-disk}}
              }
            },
            {  
              "containerPath":"/data",
              "hostPath":"data",
              "mode":"RW"
            }
          ]
        }
      },
      "env":{  
        "NEO4J_AUTH":"{{service.auth-username}}/{{service.auth-password}}",
        "NEO4J_dbms_mode":"CORE",
        "NEO4J_causalClustering_expectedCoreClusterSize":"{{service.core-expected-cluster-size}}"
      },
      "ipAddress":{  
        "networkName":"{{service.network-name}}"
      },
      "healthChecks":[
        {
          "protocol":"HTTP",
          "path":"/",
          "port":7474,
          "timeoutSeconds":10,
          "gracePeriodSeconds":240,
          "intervalSeconds":10,
          "maxConsecutiveFailures":10
        }
      ]
    },
    {  
      "id":"replica",
      "cpus":{{service.replica-cpus}},
      "mem":{{service.replica-mem}},
      "instances":{{service.replica-instances}},
      "disk": {{service.replica-disk}},
      "dependencies":[
        "/neo4j/core"
      ],
      "container":{  
        "type":"DOCKER",
        "docker":{  
          "image":"unterstein/dcos-neo4j:1.0.0-3.1-RC1",
          "network":"USER",
          "volumes":[  
            {  
              "containerPath":"data",
              "mode":"RW",
              "persistent":{  
                "type":"root",
                "size":{{service.replica-disk}}
              }
            },
            {  
              "containerPath":"/data",
              "hostPath":"data",
              "mode":"RW"
            }
          ]
        }
      },
      "env":{  
        "NEO4J_AUTH":"{{service.auth-username}}/{{service.auth-password}}",
        "NEO4J_dbms_mode":"READ_REPLICA"
      },
      "ipAddress":{  
        "networkName":"{{service.network-name}}"
      },
      "healthChecks":[
        {
          "protocol":"HTTP",
          "path":"/",
          "port":7474,
          "timeoutSeconds":10,
          "gracePeriodSeconds":240,
          "intervalSeconds":10,
          "maxConsecutiveFailures":10
        }
      ]
    }
  ]
}